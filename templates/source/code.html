{%- import 'macros.html' as m -%}
{# input vars - source, language, filename #}

{%- if g.use_hl -%}

<div class="highlight-block">
    <pre>{{ highlighter.get_linenos(source) }}</pre>
    {{ m.copy_button() if g.use_js else "" }}
    <div class="highlight">
        <pre data-language="{{ language }}"><code>
            {{- highlighter.highlight_code(source, language, filename) -}}
        </code></pre>
    </div>
</div>

{%- else -%}

<pre><code>{{ source }}</code></pre>

{%- endif -%}